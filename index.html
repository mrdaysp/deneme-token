<!DOCTYPE html>
<html>
<head>
    <title>HOPE Token Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .card { margin: 20px; padding: 20px; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .tax-alert { background: #fff3cd; border-color: #ffeeba; }
    </style>
</head>
<body>
    <!-- 1. Cüzdan Bağlama -->
    <div class="card">
        <h3>🔗 Cüzdanı Bağla</h3>
        <button id="connectWalletBtn" class="btn btn-primary">Bağlan</button>
        <p id="walletAddress" class="text-muted"></p>
    </div>

    <!-- 2. Token Satın Alma -->
    <div class="card">
        <h3>🛒 HOPE Satın Al</h3>
        <input type="number" id="bnbAmount" placeholder="BNB Miktarı" class="form-control">
        <div class="tax-alert mt-2">⚠️ %3 Kesinti Uygulanır</div>
        <button onclick="buyTokens()" class="btn btn-success mt-2">Satın Al</button>
    </div>

    <!-- 3. Token Satış -->
    <div class="card">
        <h3>💰 HOPE Sat</h3>
        <input type="number" id="tokenAmount" placeholder="HOPE Miktarı" class="form-control">
        <button onclick="sellTokens()" class="btn btn-danger mt-2">Sat</button>
    </div>

    <!-- 4. Çekiliş Katılım -->
    <div class="card">
        <h3>🎁 Twitter Çekilişine Katıl</h3>
        <button onclick="joinGiveaway()" class="btn btn-warning">Katıl</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
    <script>
        let userAccount;
        const contractAddress = "0x3a4155159250b70fea84a48a92d56886612c412a";
        const contractABI = [
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_projectWallet",
				"type": "address"
			}
		],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "projectWallet",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	}
]; // Kontrat ABN'niz

        // Cüzdan Bağlama
        async function connectWallet() {
            if (window.ethereum) {
                userAccount = (await ethereum.request({ method: 'eth_requestAccounts' }))[0];
                document.getElementById("walletAddress").innerText = `Bağlı: ${userAccount.slice(0, 6)}...${userAccount.slice(-4)}`;
            }
        }

        // Token Satın Alma
        async function buyTokens() {
            const bnbAmount = document.getElementById("bnbAmount").value;
            const contract = new web3.eth.Contract(contractABI, contractAddress);
            await contract.methods.buyTokens().send({ from: userAccount, value: web3.utils.toWei(bnbAmount, 'ether') });
        }

        // Token Satış
        async function sellTokens() {
            const tokenAmount = document.getElementById("tokenAmount").value;
            const contract = new web3.eth.Contract(contractABI, contractAddress);
            await contract.methods.sellTokens(tokenAmount).send({ from: userAccount });
        }

        // Çekiliş Katılım
        async function joinGiveaway() {
            const contract = new web3.eth.Contract(contractABI, contractAddress);
            await contract.methods.enterGiveaway().send({ from: userAccount });
        }
    </script>
</body>
</html>
