<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSC Testnet - MetaMask Bağlantı</title>
    <style>
        body { font-family: Arial; text-align: center; padding: 50px; }
        button { padding: 12px 24px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; }
        #walletInfo { margin-top: 20px; }
    </style>
</head>
<body>
    <button id="connectBtn">Cüzdanı Bağla</button>
    <div id="walletInfo"></div>

    <!-- Web3.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>

    <script>
        async function connectWallet() {
            if (!window.ethereum) {
                alert("Lütfen MetaMask yükleyin!");
                return;
            }

            try {
                // BSC Testnet'e geçiş yap
                await window.ethereum.request({
                    method: "wallet_switchEthereumChain",
                    params: [{ chainId: "0x61" }] // Hex: 0x61 = 97 (BSC Testnet)
                });

                // Web3 instance oluştur
                const web3 = new Web3(window.ethereum);
                
                // Hesapları iste
                const accounts = await web3.eth.requestAccounts();
                const address = accounts[0];

                // Ağ bilgisini al
                const networkId = await web3.eth.net.getId();
                const networkName = networkId === 97 ? "BSC Testnet" : "Bilinmeyen Ağ";

                // Arayüzü güncelle
                document.getElementById("walletInfo").innerHTML = `
                    <p>Bağlı Adres: ${address.slice(0, 6)}...${address.slice(-4)}</p>
                    <p>Ağ: ${networkName}</p>
                `;

            } catch (error) {
                if (error.code === 4902) {
                    // BSC Testnet'i ekle
                    await window.ethereum.request({
                        method: "wallet_addEthereumChain",
                        params: [{
                            chainId: "0x61",
                            chainName: "Binance Smart Chain Testnet",
                            nativeCurrency: { name: "tBNB", symbol: "tBNB", decimals: 18 },
                            rpcUrls: ["https://data-seed-prebsc-1-s1.binance.org:8545/"],
                            blockExplorerUrls: ["https://testnet.bscscan.com/"]
                        }]
                    });
                } else {
                    alert("Hata: " + error.message);
                }
            }
        }

        document.getElementById("connectBtn").addEventListener("click", connectWallet);
    </script>
</body>
</html>
